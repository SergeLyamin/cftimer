<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Онлайн таймер для кроссфит</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        timer: ['Ubuntu Mono', 'monospace'],
                    },
                    width: {
                        'menu': '300px',
                    }
                }
            }
        }
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Ubuntu+Mono&display=swap" rel="stylesheet">
    <style>
        .modal-slide-up {
            transform: translateY(100%);
            transition: transform 0.3s ease-out;
        }
        .modal-slide-up.show {
            transform: translateY(0);
        }
    </style>
</head>

<body class="bg-black text-white font-timer min-h-screen flex flex-col justify-center items-center">
    <!-- Часы в левом нижнем углу -->
    <button id="clock-button" class="absolute bottom-5 left-5 text-2xl cursor-pointer">09:23</button>

    <!-- Главное меню -->
    <div id="app" class="flex flex-col items-center gap-5">
        <button class="menu-item w-menu p-4 text-2xl bg-transparent border-2 border-white cursor-pointer uppercase hover:bg-white hover:text-black transition duration-200" data-timer="interval">Интервалы</button>
        <button class="menu-item w-menu p-4 text-2xl bg-transparent border-2 border-white cursor-pointer uppercase hover:bg-white hover:text-black transition duration-200" data-timer="fortime">На время</button>
        <button class="menu-item w-menu p-4 text-2xl bg-transparent border-2 border-white cursor-pointer uppercase hover:bg-white hover:text-black transition duration-200" data-timer="amrap">AMRAP</button>
    </div>

    <!-- Кнопка настроек -->
    <button id="settings-button" class="absolute bottom-5 right-5 text-2xl bg-transparent border-none text-white cursor-pointer">
        <img src="img/remote-ico.svg" alt="Настройки" class="w-8 h-8">
    </button>

    <!-- Модальное окно для QR-кода -->
    <div id="qr-modal" class="fixed bottom-0 right-0 mb-16 mr-5 bg-white p-5 rounded-t shadow-lg text-center modal-slide-up hidden">
        <button id="close-modal" class="absolute top-2 right-2 text-black">✖</button>
        <img src="img/qr-code.png" alt="QR Code" class="w-48 h-48">
        <p class="text-black mt-2">Сканируйте для удаленного управления</p>
        <p class="text-black mt-2 text-sm">
            <a href="https://github.com/yourusername/yourrepo" class="text-blue-600 hover:underline">GitHub</a>
        </p>
    </div>

    <!-- Экран часов -->
    <div id="clock-screen" class="fixed inset-0 bg-black flex justify-center items-center text-[18vw] hidden">
        <div class="clock-display"></div>
    </div>

    <script src="timer.js"></script>
    <script src="metrics.js"></script>
    <script>
        // Обновление времени
        function updateTime() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('ru-RU', { 
                hour: '2-digit', 
                minute: '2-digit'
            });
            document.getElementById('clock-button').textContent = timeString;
            if (!document.getElementById('clock-screen').classList.contains('hidden')) {
                document.querySelector('.clock-display').textContent = 
                    now.toLocaleTimeString('ru-RU', { 
                        hour: '2-digit', 
                        minute: '2-digit',
                        second: '2-digit'
                    });
            }
        }

        setInterval(updateTime, 1000);
        updateTime();

        // Обработчики для часов
        document.getElementById('clock-button').addEventListener('click', () => {
            document.getElementById('clock-screen').classList.remove('hidden');
        });

        document.getElementById('clock-screen').addEventListener('click', () => {
            document.getElementById('clock-screen').classList.add('hidden');
        });

        // Обработчики для модального окна
        document.getElementById('settings-button').addEventListener('click', () => {
            const modal = document.getElementById('qr-modal');
            modal.classList.remove('hidden');
            setTimeout(() => modal.classList.add('show'), 10);
        });

        document.getElementById('close-modal').addEventListener('click', () => {
            const modal = document.getElementById('qr-modal');
            modal.classList.remove('show');
            setTimeout(() => modal.classList.add('hidden'), 300);
        });

        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                const modal = document.getElementById('qr-modal');
                modal.classList.remove('show');
                setTimeout(() => modal.classList.add('hidden'), 300);
                document.getElementById('clock-screen').classList.add('hidden');
            }
        });

        // Обработчики для кнопок меню
        document.querySelectorAll('.menu-item').forEach(button => {
            button.addEventListener('click', (e) => {
                const timerType = e.target.dataset.timer;
                if (timerType && window.timer) {
                    window.timer.showScreen(timerType);
                }
            });
        });
    </script>
</body>

</html>