# Requirements Document

## Introduction

Данная спецификация описывает требования к полной переработке приложения CrossFit Timer - веб-приложения для спортивных тренировок с различными типами таймеров и возможностью удаленного управления. Новая версия должна иметь современную модульную архитектуру, улучшенную производительность, расширенную функциональность и лучший пользовательский опыт.

## Requirements

### Основной интерфейс и навигация

### Requirement 1

**User Story:** Как пользователь, я хочу иметь интуитивный главный экран с выбором типов таймеров, чтобы быстро начать тренировку

#### Acceptance Criteria

1. WHEN пользователь открывает приложение THEN система SHALL отобразить главное меню с тремя основными типами таймеров: "Интервалы", "На время", "AMRAP"
2. WHEN пользователь нажимает на тип таймера THEN система SHALL перейти к экрану настройки выбранного таймера
3. IF экран имеет размер меньше 768px THEN система SHALL адаптировать интерфейс для мобильных устройств
4. WHEN пользователь находится на главном экране THEN система SHALL отображать текущее время в левом нижнем углу

### Requirement 9

**User Story:** Как пользователь, я хочу иметь возможность просмотра часов в полноэкранном режиме, чтобы использовать приложение как большие часы

#### Acceptance Criteria

1. WHEN пользователь кликает на время в левом нижнем углу THEN система SHALL открыть полноэкранный режим часов
2. WHEN отображаются часы THEN система SHALL показывать текущее время в формате ЧЧ:ММ:СС согласно дизайн-макетам
3. WHEN пользователь нажимает "Назад" THEN система SHALL вернуться к главному меню
4. IF устройство поддерживает полноэкранный режим THEN система SHALL предложить его активацию

### Requirement 13

**User Story:** Как пользователь, я хочу иметь доступ к каталогу популярных тренировочных схем, чтобы быстро запускать известные форматы тренировок

#### Acceptance Criteria

1. WHEN пользователь открывает главное меню THEN система SHALL отображать базовые готовые схемы с возможностью развернуть полный список
2. WHEN пользователь выбирает готовую схему THEN система SHALL загрузить встроенные предустановленные параметры (Tabata: 8 раундов 20сек/10сек, EMOM, Fight Gone Bad и др.)
3. WHEN схема загружена THEN система SHALL позволить пользователю изменить параметры перед запуском
4. IF готовые схемы недоступны THEN система SHALL работать только с базовыми типами таймеров

### Типы таймеров и их настройка

### Requirement 2

**User Story:** Как пользователь, я хочу настраивать параметры интервального таймера, чтобы адаптировать тренировку под свои нужды

#### Acceptance Criteria

1. WHEN пользователь выбирает "Интервалы" THEN система SHALL отобразить форму настройки с полями: количество раундов, кругов, время работы, время отдыха, время подготовки
2. WHEN пользователь вводит значения в поля THEN система SHALL валидировать ввод согласно диапазонам: Раунды/Круги (1–999), Секунды/Минуты (0–59), Часы (0–24)
3. WHEN пользователь использует мобильное устройство THEN система SHALL предоставить интуитивный ввод чисел через удержание кнопки и движение пальцем вверх/вниз с изменением шага в зависимости от скорости движения
4. WHEN пользователь нажимает "Старт" THEN система SHALL сохранить настройки и запустить таймер
5. IF значения не заполнены THEN система SHALL использовать значения по умолчанию (8 раундов, 20 сек работа, 10 сек отдых, 10 сек подготовка)

### Requirement 7

**User Story:** Как пользователь, я хочу использовать таймер "На время", чтобы отслеживать время выполнения тренировки

#### Acceptance Criteria

1. WHEN пользователь выбирает "На время" THEN система SHALL отобразить настройки с полями: целевое время, время подготовки
2. WHEN таймер запущен THEN система SHALL считать время вперед от 00:00
3. WHEN достигнуто целевое время THEN система SHALL воспроизвести отличительный финальный сигнал (более длинный чем остальные) и показать сообщение о завершении
4. WHEN тренировка завершена THEN система SHALL предложить кнопку "Перезапуск"

### Requirement 8

**User Story:** Как пользователь, я хочу использовать таймер AMRAP, чтобы выполнить максимальное количество раундов за установленное время

#### Acceptance Criteria

1. WHEN пользователь выбирает "AMRAP" THEN система SHALL отобразить настройки с полями: время тренировки, время подготовки
2. WHEN таймер запущен THEN система SHALL считать время назад от установленного значения
3. WHEN время истекает THEN система SHALL воспроизвести финальный сигнал и показать сообщение о завершении
4. WHEN тренировка завершена THEN система SHALL предложить кнопку "Перезапуск"

### Работа таймера и управление

### Requirement 3

**User Story:** Как пользователь, я хочу видеть четкое отображение работающего таймера, чтобы следить за прогрессом тренировки

#### Acceptance Criteria

1. WHEN таймер запущен THEN система SHALL отображать крупное время в центре экрана
2. WHEN идет интервальная тренировка THEN система SHALL показывать номер текущего раунда и фазу (работа/отдых)
3. WHEN таймер работает THEN система SHALL отображать полосу общего прогресса по границе экрана, заполняющуюся по часовой стрелке
4. WHEN отображается прогресс THEN система SHALL использовать цвета: красный (работа), зеленый (отдых), желтый (предупреждение за 3 сек)
5. WHEN идет интервальная тренировка THEN система SHALL показывать два отдельных графика-бублика под основным таймером для прогресса раундов/кругов
6. WHEN остается 3 секунды или меньше THEN система SHALL воспроизводить звуковой сигнал
7. WHEN фаза меняется THEN система SHALL воспроизводить соответствующий звук (старт/отдых/финиш)
8. WHEN пользователь кликает на таймер THEN система SHALL ставить таймер на паузу или возобновлять его

### Requirement 4

**User Story:** Как пользователь, я хочу управлять таймером с помощью клавиатуры, чтобы быстро контролировать тренировку

#### Acceptance Criteria

1. WHEN пользователь нажимает пробел THEN система SHALL переключать паузу/воспроизведение таймера
2. WHEN пользователь нажимает клавишу F или А THEN система SHALL переключать полноэкранный режим
3. WHEN пользователь нажимает Escape THEN система SHALL выходит из из полноэкранного режима
4. IF таймер не запущен THEN система SHALL игнорирует команды управления таймером

### Requirement 14

**User Story:** Как пользователь, я хочу настраивать звуковые сигналы, чтобы адаптировать их под условия тренировки

#### Acceptance Criteria

1. WHEN пользователь открывает настройки, раздел звука THEN система SHALL отобразить регулятор громкости и выбор типов сигналов (старт, стоп, пауза)
2. WHEN пользователь изменяет громкость THEN система SHALL отображать кнопку "Тест" рядом с регулятором громкости, при нажатии на которую воспроизводится тестовый сигнал с установленной громкостью
3. WHEN пользователь выбирает тип сигнала THEN система SHALL позволить выбрать из нескольких вариантов (классический, резкий, мягкий)
4. WHEN настройки звука изменены THEN система SHALL сохранить их и применить ко всем подключенным устройствам
5. IF пользователь отключает звук THEN система SHALL предоставить визуальные индикаторы смены фаз

### Удаленное управление

### Requirement 5

**User Story:** Как пользователь, я хочу получить QR-код для полнофункционального удаленного управления, чтобы контролировать таймер с мобильного устройства

#### Acceptance Criteria

1. WHEN пользователь нажимает кнопку пульта управления THEN система SHALL отобразить модальное окно с QR-кодом
2. WHEN QR-код сканируется THEN система SHALL открыть полную мобильную версию интерфейса таймера
3. WHEN пользователь выполняет действия на мобильном устройстве THEN система SHALL синхронизировать их с основным экраном в реальном времени
4. WHEN пользователь настраивает таймер на мобильном THEN система SHALL отправить настройки на основной экран
5. WHEN таймер запущен с мобильного THEN система SHALL синхронизировать состояние на всех подключенных устройствах
6. IF основной экран недоступен THEN мобильное устройство SHALL работать как автономный таймер
7. IF основное устройство отключается THEN система SHALL уведомить контроллеры об отключении

### Технические требования

### Requirement 10

**User Story:** Как разработчик, я хочу иметь модульную архитектуру приложения, чтобы легко поддерживать и расширять функциональность

#### Acceptance Criteria

1. WHEN приложение инициализируется THEN система SHALL использовать модульную структуру с четким разделением ответственности
2. WHEN добавляется новый тип таймера THEN система SHALL позволить это сделать без изменения существующего кода
3. WHEN происходит ошибка THEN система SHALL обрабатывать её изолированно в соответствующем модуле
4. IF требуется изменить UI компонент THEN система SHALL позволить это сделать без влияния на бизнес-логику

### Requirement 11

**User Story:** Как пользователь, я хочу чтобы приложение работало стабильно на всех устройствах, чтобы использовать его в любых условиях

#### Acceptance Criteria

1. WHEN приложение загружается на мобильном устройстве THEN система SHALL адаптировать интерфейс под размер экрана
2. WHEN устройство поворачивается THEN система SHALL корректно отображать интерфейс в новой ориентации
3. WHEN происходит потеря сети THEN система SHALL сохранить состояние таймера и восстановить соединение при возможности
4. IF браузер не поддерживает WebSocket THEN система SHALL показать соответствующее уведомление

### Requirement 12

**User Story:** Как пользователь, я хочу чтобы настройки сохранялись между сессиями, чтобы не вводить их каждый раз

#### Acceptance Criteria

1. WHEN пользователь изменяет настройки таймера THEN система SHALL сохранить их в локальном хранилище
2. WHEN пользователь перезагружает страницу THEN система SHALL восстановить последние использованные настройки
3. WHEN пользователь очищает данные браузера THEN система SHALL использовать настройки по умолчанию
4. IF локальное хранилище недоступно THEN система SHALL работать с настройками по умолчанию без ошибок