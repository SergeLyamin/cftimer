# Техническая спецификация CrossFit Timer

## 1. Технологический стек
- Frontend: HTML5, CSS3 (Tailwind CSS), JavaScript (ES6+)
- Backend: Node.js, Express, WebSocket (ws)
- Сборка: PostCSS, Tailwind CSS
- Дополнительно: QRCode для генерации QR-кодов

## 2. Архитектура приложения
### 2.1. Структура файлов 

### 2.2. Модульная структура
- **Timer** - основной класс с логикой таймеров
- **WebSocket Handler** - управление WebSocket соединениями
- **UI Controller** - управление интерфейсом
- **Sound Manager** - управление звуковыми эффектами
- **Settings Manager** - управление настройками

## 3. Интерфейс
### 3.1. Типографика
- Основной шрифт: Roboto Mono (Google Fonts)
- Начертания: 400 (normal), 500 (medium), 600 (semibold)
- Размеры:
  * Основной текст: 1.5rem (24px)
  * Заголовки: 2.25rem (36px)
  * Кнопки меню: 3rem (48px)
  * Таймер: 18vw (адаптивный)

### 3.2. Цветовая схема
- Основной фон: черный (#000000)
- Текст и границы: белый (#FFFFFF)
- Акцентный цвет (номер раунда): #d01b1c

### 3.3. Анимации и переходы
- Hover-эффекты: transition 100ms
- Модальные окна: transform + transition 300ms ease-out
- Состояния кнопок: opacity transition 200ms

## 4. Оптимизация
### 4.1. Производительность
- Минимизация reflow при обновлении таймера
- Использование requestAnimationFrame для анимаций
- Оптимизация работы с DOM
- Кэширование DOM-элементов

### 4.2. Память
- Очистка таймеров и интервалов
- Освобождение ресурсов при смене экранов
- Контроль утечек памяти в WebSocket соединениях

## 5. Безопасность
### 5.1. Валидация ввода
- Проверка числовых значений в полях ввода
- Ограничение длины ввода (не более 2 символов)
- Защита от XSS при отображении данных

### 5.2. WebSocket
- Проверка origin для WebSocket соединений
- Валидация входящих сообщений
- Обработка разрывов соединения

## 6. Тестирование
### 6.1. Функциональное тестирование
- Проверка всех типов таймеров
- Тестирование звуковых уведомлений
- Проверка удаленного управления

### 6.2. Кроссбраузерная совместимость
- Chrome (последние 2 версии)
- Firefox (последние 2 версии)
- Safari (последние 2 версии)
- Edge (последние 2 версии)

### 6.3. Мобильные устройства
- iOS Safari
- Android Chrome
- Адаптивная верстка
- Touch-события

## 7. Развертывание
### 7.1. Требования к серверу
- Node.js >= 16.0.0
- Поддержка WebSocket
- SSL для безопасных соединений

### 7.2. Процесс сборки 
bash:SOP/technical-specification.md
npm run build # Сборка проекта
npm run css # Компиляция CSS
npm run dev:full # Режим разработки

## 8. Мониторинг и поддержка
- Логирование ошибок
- Сбор метрик использования
- Мониторинг WebSocket соединений

